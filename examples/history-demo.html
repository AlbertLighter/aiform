<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIForm 历史记录功能演示</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .demo-title {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 24px;
            font-weight: 600;
        }
        
        .demo-description {
            color: #6b7280;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #374151;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checkbox-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: normal;
            margin-bottom: 0;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .radio-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: normal;
            margin-bottom: 0;
        }
        
        .feature-list {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .feature-list h3 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .feature-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .feature-list li {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: #6b7280;
        }
        
        .feature-list li::before {
            content: "✨";
            font-size: 14px;
        }
        
        .demo-actions {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }
        
        .demo-button {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            margin-right: 12px;
            margin-bottom: 8px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .demo-button:hover {
            background: #5a67d8;
        }
        
        .demo-button.secondary {
            background: #f3f4f6;
            color: #374151;
        }
        
        .demo-button.secondary:hover {
            background: #e5e7eb;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">🎯 AIForm 历史记录功能演示</h1>
        <p class="demo-description">
            这是AIForm的历史记录功能演示页面。填写下面的表单，系统会自动保存您的输入历史，支持一键恢复和历史记录管理。
        </p>
        
        <form id="demo-form">
            <div class="form-group">
                <label for="name">姓名 *</label>
                <input type="text" id="name" name="name" required placeholder="请输入您的姓名">
            </div>
            
            <div class="form-group">
                <label for="email">邮箱地址 *</label>
                <input type="email" id="email" name="email" required placeholder="example@email.com">
            </div>
            
            <div class="form-group">
                <label for="phone">手机号码</label>
                <input type="tel" id="phone" name="phone" placeholder="请输入手机号码">
            </div>
            
            <div class="form-group">
                <label for="company">公司名称</label>
                <input type="text" id="company" name="company" placeholder="请输入公司名称">
            </div>
            
            <div class="form-group">
                <label for="position">职位</label>
                <select id="position" name="position">
                    <option value="">请选择职位</option>
                    <option value="frontend">前端工程师</option>
                    <option value="backend">后端工程师</option>
                    <option value="fullstack">全栈工程师</option>
                    <option value="designer">UI/UX设计师</option>
                    <option value="pm">产品经理</option>
                    <option value="qa">测试工程师</option>
                    <option value="other">其他</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="experience">工作经验</label>
                <div class="radio-group">
                    <label><input type="radio" name="experience" value="0-1"> 0-1年</label>
                    <label><input type="radio" name="experience" value="1-3"> 1-3年</label>
                    <label><input type="radio" name="experience" value="3-5"> 3-5年</label>
                    <label><input type="radio" name="experience" value="5+"> 5年以上</label>
                </div>
            </div>
            
            <div class="form-group">
                <label>技能栈 (可多选)</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="skills" value="javascript"> JavaScript</label>
                    <label><input type="checkbox" name="skills" value="typescript"> TypeScript</label>
                    <label><input type="checkbox" name="skills" value="react"> React</label>
                    <label><input type="checkbox" name="skills" value="vue"> Vue.js</label>
                    <label><input type="checkbox" name="skills" value="node"> Node.js</label>
                    <label><input type="checkbox" name="skills" value="python"> Python</label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="bio">个人介绍</label>
                <textarea id="bio" name="bio" placeholder="请简单介绍一下自己..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="website">个人网站</label>
                <input type="url" id="website" name="website" placeholder="https://your-website.com">
            </div>
            
            <div class="form-group">
                <label for="github">GitHub</label>
                <input type="text" id="github" name="github" placeholder="请输入GitHub用户名">
            </div>
            
            <div class="form-group">
                <label for="salary">期望薪资</label>
                <select id="salary" name="salary">
                    <option value="">请选择薪资范围</option>
                    <option value="5k-10k">5K-10K</option>
                    <option value="10k-20k">10K-20K</option>
                    <option value="20k-30k">20K-30K</option>
                    <option value="30k+">30K以上</option>
                </select>
            </div>
        </form>
        
        <div class="feature-list">
            <h3>🎉 历史记录功能特性</h3>
            <ul>
                <li>自动保存表单输入历史（防抖处理，避免频繁保存）</li>
                <li>页面刷新后智能提示恢复上次输入的数据</li>
                <li>历史记录管理：查看、恢复、删除历史数据</li>
                <li>按页面URL区分不同表单的历史记录</li>
                <li>存储统计信息，支持清空历史记录</li>
                <li>完全本地存储，保护隐私数据安全</li>
                <li>与AI重写功能完美结合，重写后的数据也会保存到历史</li>
                <li>支持表单字段选择性恢复</li>
            </ul>
        </div>
        
        <div class="demo-actions">
            <button type="button" class="demo-button" onclick="fillSampleData()">填入示例数据</button>
            <button type="button" class="demo-button secondary" onclick="clearForm()">清空表单</button>
            <button type="button" class="demo-button secondary" onclick="refreshPage()">刷新页面测试</button>
            <button type="button" class="demo-button secondary" onclick="showStorage()">查看存储</button>
        </div>
    </div>

    <script src="../dist/aiform.js"></script>
    <script>
        // 初始化AIForm
        const aiform = new AIForm({
            apiKey: '', // 请在配置标签页中设置您的API密钥
            provider: 'openai',
            model: 'gpt-3.5-turbo',
            position: 'bottom-right',
            enableHistory: true // 启用历史记录功能
        });

        // 演示功能
        function fillSampleData() {
            document.getElementById('name').value = '张三';
            document.getElementById('email').value = 'zhangsan@example.com';
            document.getElementById('phone').value = '13800138000';
            document.getElementById('company').value = '科技有限公司';
            document.getElementById('position').value = 'frontend';
            document.querySelector('input[name="experience"][value="3-5"]').checked = true;
            document.querySelector('input[name="skills"][value="javascript"]').checked = true;
            document.querySelector('input[name="skills"][value="react"]').checked = true;
            document.getElementById('bio').value = '资深前端工程师，专注于React生态系统开发...';
            document.getElementById('website').value = 'https://zhangsan.dev';
            document.getElementById('github').value = 'zhangsan';
            document.getElementById('salary').value = '20k-30k';
            
            // 触发change事件以便自动保存
            document.querySelectorAll('input, select, textarea').forEach(el => {
                el.dispatchEvent(new Event('change', { bubbles: true }));
            });
        }

        function clearForm() {
            document.getElementById('demo-form').reset();
        }

        function refreshPage() {
            if (confirm('确定要刷新页面吗？这将测试历史记录恢复功能。')) {
                location.reload();
            }
        }

        function showStorage() {
            const historyManager = aiform.getHistoryManager();
            const stats = historyManager.getStorageInfo();
            const pageHistory = historyManager.getCurrentPageHistory();
            
            alert(`存储信息：
• 当前页面历史记录: ${pageHistory.length} 条
• 总历史记录: ${stats.entries} 条
• 存储大小: ${(stats.used / 1024).toFixed(2)} KB`);
        }

        // 页面加载完成提示
        window.addEventListener('load', function() {
            console.log('AIForm 历史记录功能演示页面已加载');
            console.log('请填写表单，系统会自动保存您的输入历史');
        });
    </script>
</body>
</html> 